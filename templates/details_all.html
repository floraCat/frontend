<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="css/reset.css" />
<link rel="stylesheet" href="css/col_style.css" />
<script src="js/jquery-1.10.2.js"></script>
<script src="js/copy/jquery.zclip.min.js"></script>
<title>base</title>
</head>
<body>



<!--头部-->
<{include file="global_header.php"}>


<div class="fDetails">

	<!--图片-->
	<div class="fPic"><ol><img src="col_<{$smarty.get.page}>/pictures/<{$smarty.get.col}>/<{if $smarty.get.page=="plus"}><{$info.ttl_short}><{else}><{$info.ttl}><{/if}>" /></ol></div>
	<p class="ttl"><{if $smarty.get.page=="plus"}><{$info.ttl_short}><{else}><{$info.ttl}><{/if}></p>

	<!--常用模板展示-->
	<div class="fTemps">
		<div class="hd">此插件常用的情景demo如下：</div>
		<div class="tabs" data-way="js">
			<a data-ttl="dialog_default">默认弹窗</a>
			<a data-ttl="dialog_callback">确认后回调</a>
			<a data-ttl="dialog_icon">带提示图标</a>
			<a data-ttl="dialog_link">确认后跳转</a>
			<a data-ttl="dialog_setTime">倒计时关闭</a>
		</div>
		<div class="drops">
			<div class="ttl2">以下是此demo的配置，可按需修改配置项后运行：</div>
			<textarea class="code"></textarea>
		    <a class="btn-run">运行此demo</a>
		    <div class="btns">
		    	<span>此demo其他操作：</span>
		    	<{if $smarty.get.page!="unit"}>
				<a class="btn_code fr" target="_blank" href="col_handle.php?page=<{$smarty.get.page}>&col=<{$smarty.get.col}>&folder=<{$smarty.get.folder}>&act=setting&ttl=<{$info.ttl}>">修改源码</a>
				<{/if}>
				<a class="fl copy" href="javascript:;">复制主体代码</a>
				<{if $smarty.get.page!="unit"}>
					<a class="fr btn_download" href="col_zip.php?page=<{$smarty.get.page}>&col=<{$smarty.get.col}>&folder=<{$smarty.get.folder}>&ttl=<{$info.ttl}>&act=zipAll">整套下载</a>
				<{else}>
					<a class="fr download" href="files/zip/col_<{$smarty.get.page}>/<{$info.ttl}>.zip">整套下载</a>
				<{/if}>
		    </div>
			<xmp id="code" style="display:none;"><{$code}></xmp>
			<div class="h_mask"></div>
			<div class="mAlert2">已复制到剪切板！</div>
		</div>
	</div>
	<div class="fDemo">
		<div class="mask"></div>
		<a class="quit"></a>
	</div>



<script>
window.onload=function(){
	//默认第一个demo点击
	$(".fTemps .tabs a").eq(0).trigger("click");
}
$(function(){
	//切换demo
	$(".fTemps").on("click",".tabs a",function(){
		$(this).addClass("on").siblings().removeClass("on");
		var way=$(this).parent().attr("data-way");
		var page=$("#page").val();
		var col=$("#col").val();
		var folder=$("#folder").val();
		var details=$("#details").val();
		var demo=details.substr(0,details.length-6)+"/"+$(this).attr("data-ttl");
		var submitdata={
			'page':page,
			'col':col,
			'folder':folder,
			'demo':demo,
			'way':way,
			'act':'demos'
		}
		$.post("col_handle.php",submitdata,function(data){
			var data = eval("(" + data + ")");
			console.log(data["code"]);
			$(".fTemps .drops").prepend('<xmp style="display:none;" id="height_code">'+data["script"]+'</xmp>');
			$(".fTemps .code").height($("#height_code").height()+80).text(data["script"]);
			$("#height_code").remove();
			$("#code").text(data["code"]);
			$(".btn_code").attr("href",'col_handle.php?page='+page+'&col='+col+'&folder='+folder+'&act=setting&ttl='+demo);
			if($(".btn_download").length>0){
				$(".btn_download").attr("href",'col_zip.php?page='+page+'&col='+col+'&folder='+folder+'&ttl='+demo+'&act=zipAll');
			}
			
				
		});
	});

	//运行demo
	$(".btn-run").click(function(){
		$(".fDemo").append('<iframe class="iframe" src="temp_details_setting.html"></iframe>').show();
	});
	//关闭demo
	$(".fDemo .quit").on("click",function(){
		$(".fDemo").hide();
		$(".fDemo").find("iframe").remove()
	});
});
	</script>


	<!--兼容-->
	<input type="hidden" id="dataHack" value="<{$info.hack}>" />
	<div class="fHack">
		<ol id="firefox" class="yes"><img src="images/sys/tab_firefox.png" /></ol>
		<ol id="chrome" class="yes"><img src="images/sys/tab_chrome.png" /></ol>
		<ol id="safari" class="yes"><img src="images/sys/tab_safari.png" /></ol>
		<ol class="ie">
			<img src="images/sys/tab_ie.png" />
			<ul>
				<li id="ie11" class="yes">11</li>
				<li id="ie10" class="yes">10</li>
				<li id="ie9" class="no">9</li>
				<li id="ie8" class="no">8</li>
				<li id="ie7" class="no">7</li>
				<li id="ie6" class="no">6</li>
			</ul>
		</ol>
	</div>

	<!--按键-->
<!-- 	<ol class="fBtn">
		<ul class="btn1">
			<a class="fl" target="_blank" href="col_handle.php?page=<{$smarty.get.page}>&col=<{$smarty.get.col}>&folder=<{$smarty.get.folder}>&_temp=<{$info.ttl}>">效果展示</a>
			<{if $smarty.get.page!="unit"}>
			<a class="fr" target="_blank" href="col_handle.php?page=<{$smarty.get.page}>&col=<{$smarty.get.col}>&folder=<{$smarty.get.folder}>&act=setting&ttl=<{$info.ttl}>">自定义设置</a>
			<{/if}>
		</ul>
		<ul class="btn2">
			<a class="fl copy" href="javascript:;">源码复制</a>
			<{if $smarty.get.page!="unit"}>
				<a class="fr download" href="col_zip.php?page=<{$smarty.get.page}>&col=<{$smarty.get.col}>&folder=<{$smarty.get.folder}>&ttl=<{$info.ttl}>&act=zipAll">整套下载</a>
			<{else}>
				<a class="fr download" href="files/zip/col_<{$smarty.get.page}>/<{$info.ttl}>.zip">整套下载</a>
			<{/if}>
		</ul>
	</ol>		

	<xmp id="code" style="display:none;"><{$code}></xmp>
	<div class="h_mask"></div>
	<div class="mAlert2">已复制到剪切板！</div> -->

	<!--简介-->
	<div class="fDesc"><p>模块描述：<{$info.desc}></p></div>

	<!--依赖-->
	<input type="hidden" id="dataRefer" value="<{$info.refer}>" />
	<div class="fRely">
		<h5>DEMO所依赖的文件：</h5>
		<ol>
			<li>
				<p>reset.css</p>
				<span>：浏览器重置样式</span>
				<a target="_blank" href="css/reset.css">查看源码</a>
				<a target="_blank" href="col_zip.php?act=zipOne&file=css/reset.css">点击下载</a>
			</li>
			<li>
				<p>jquery-1.10.2.js</p>
				<span>：JQ库</span>
				<a target="_blank" href="js/jquery-1.10.2.js">查看源码</a>
				<a target="_blank" href="col_zip.php?act=zipOne&file=js/jquery-1.10.2.js">点击下载</a>
			</li>
		</ol>
	</div>

	<!--其他说明-->
	<div class="fNote">
		<h5>其他说明：</h5>
		<ol>
			<{$info.note}>
		</ol>
	</div>

</div><!--/fDetails-->



<script>
$(function(){

	//兼容
	var dataHack=$("#dataHack").val().replace(/\s+/g,"");
	var arr_hack=dataHack.split(",");
	for(var i=0;i<arr_hack.length;i++){
		var arr=[];
		arr[i]=arr_hack[i].split(":");
		$("#"+arr[i][0]).attr("class","").addClass(arr[i][1]);
	}

	//依赖
	if($("#dataRefer").val()!=""){
		var dataRefer=$("#dataRefer").val().replace(/\s+/g,"");//去掉空格？
		var arr_Refer=dataRefer.split(",");
		for(var i=0;i<arr_Refer.length;i++){
			var arr=[];
			arr[i]=arr_Refer[i].split(":");
			var temp=arr[i][0].split("/");
			var basename=temp[temp.length-1];
			var html=
			'<li>'
				+'<p>'+basename+'</p>'
				+'<span>：'+arr[i][1]+'</span>'
				+'<a target="_blank" href="'+arr[i][0]+'">查看源码</a>'
				+'<a href="col_zip.php?act=zipOne&page=<{$smarty.get.page}>&file='+arr[i][0]+'">点击下载</a>'
			+'</li>';
			$(".fRely ol").append(html);
		}
	}
		

	//复制代码
	$(".fTemps .copy").zclip({
		path: "js/copy/ZeroClipboard.swf",
		copy: function(){
			var str_code=$("#code").text();
			var start_js=str_code.indexOf("$(function(){")+13;
            var end_js=str_code.indexOf("/script")-1;
            var str_js=str_code.substr(start_js,end_js-start_js);
            if(str_js.replace(/\s+/g,"")=="});"){
                var start_js_2=str_code.indexOf("<script>");
                str_code=str_code.substr(0,start_js_2);
            }
            return str_code;
		},
		afterCopy:function(){
			$(".h_mask").show().delay(1000).fadeOut();
			$(".mAlert2").css("top",$(window).height()/2-30+"px").show().delay(1000).fadeOut();
		}
	});

});
</script>


<!--当前导航加.on-->
<input type="hidden" id="page" value="<{$smarty.get.page}>" />
<input type="hidden" id="col" value="<{$smarty.get.col}>" />
<input type="hidden" id="folder" value="<{$smarty.get.folder}>" />
<input type="hidden" id="details" value="<{$smarty.get.details}>" />
<script>
$(function(){
    var page=$("#page").val();
    $(".pNav ."+page).addClass("on").parent().siblings().children().removeClass("on");
});
</script>



<!--底部-->
<!--_refer-->
<{include file="global_footer.php"}>
<!--refer_-->

</body>
</html>
