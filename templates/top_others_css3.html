<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="css/h_reset.css" />
	<link rel="stylesheet" href="css/col_style.css" />
	<script type="text/javascript" src="js/jquery-1.10.2.js"></script>
	<script type="text/javascript" src="js/copy/jquery.zclip.min.js"></script>
</head>
<body>



<!--头部-->
<{include file="global_header.php"}>



<style>
.copyList{ width:1200px; margin:20px auto;}
.copyList ul{ overflow: hidden; }
.copyList li{ float:left; position:relative; width:18%; margin:20px 0.5%; border:#eee 1px solid; background:#FDFFD3; box-sizing:border;}
.copyList li .img{ position: relative; top: 10px; left: 10px; width:196px; height:196px; background: #fff; display: table-cell;; vertical-align: middle; text-align: center;}
.copyList li h4{ text-indent:10px; padding:15px 0 34px;}
.copyList li input{ position:absolute; left:7px; bottom:7px; padding:0 3px; height:24px; line-height:24px; background: #fff; border:#eee 1px solid;}
.copyList li ol{ position:absolute; right:10px; bottom:5px;}

</style>
<div class="copyList">
	<div class="cutter" style=" display:none;"></div>
	<ul class="over">
		<{section name=list loop=$rsList}>
		<li>
			<div class="img"><img src="col_others/pictures/css3/<{$rsList[list].ttl_img}>.png" /></div>
			<h4><{$rsList[list].title}></h4>
			<{if $rsList[list].val}>
			<input type="text" value="<{$rsList[list].val}>">
			<{/if}>
			<ol>
				<a class="copy" data-title="<{$rsList[list].title}>" href="javascript:;">复制代码</a>
				<xmp class="code" style="display:none;"><{$rsList[list].code}></xmp>
			</ol>
		</li>
		<{/section}>
	</ul>
</div>



<div class="h_mask"></div><!--覆盖层-->
<div class="mAlert2">已复制到剪切板！</div>


<script>
$(function(){

	$(".copyList li .copy").zclip({
		path: "js/copy/ZeroClipboard.swf",
		copy: function(){
			return $(this).parents("li").find(".code").text();
		},
		afterCopy:function(){
			$(".h_mask").show().delay(1000).fadeOut();
			$(".mAlert2").css("top",windowH()/2-30+"px").show().delay(1000).fadeOut();
		}
	});

	$(".copyList li input").keyup(function(){
		var _this=$(this);
		var data_title=$(this).parents("li").find(".copy").data("title");
		var data_val=$(this).val();
		var submitdata={
			data_title:data_title,
			data_val:data_val
		};
		console.log(submitdata);
		$.post('col_others.php?col=css3',submitdata,
		function(data){
			_this.parents("li").find(".code").text(data);
			_this.parents("li").find(".zclip").remove();
			_this.parents("li").find(".copy").zclip({
				path: "js/copy/ZeroClipboard.swf",
				copy: function(){
					return _this.parents("li").find(".code").text();
				},
				afterCopy:function(){
					$(".h_mask").show().delay(1000).fadeOut();
					$(".mAlert2").css("top",windowH()/2-30+"px").show().delay(1000).fadeOut();
				}
			});
		},'json');
	});



	// $(".copy").click(function(){
	// 	_this=$(this);
	// 	var data_title=$(this).data("title");
	// 	if($(this).parents("li").find("input")){
	// 		var data_val=$(this).parents("li").find("input").val();
	// 	}
	// 	var submitdata={
	// 		data_title:data_title,
	// 		data_val:data_val
	// 	};
	// 	$.post('col_others.php?col=css3',submitdata,
	// 	function(data){
	// 		$(".cutter").text(data);
	// 		_this.zclip({
	// 			path: "js/copy/ZeroClipboard.swf",
	// 			copy: function(){
	// 			return $(".cutter").text();
	// 			},
	// 			afterCopy:function(){
	// 				$(".h_mask").show().delay(1000).fadeOut();
	// 				$(".mAlert2").css("top",windowH()/2-30+"px").show().delay(1000).fadeOut();
	// 			}
	// 		});
	// 	},'json');
	// });

});

//屏高
function windowH(){
	if(self.innerHeight){ windowHeight = self.innerHeight;
	}else{
		if(document.documentElement && document.documentElement.clientHeight){    
			windowHeight = document.documentElement.clientHeight;
		}else{
			if(document.body){ windowHeight = document.body.clientHeight;}
		}
	} 
	return windowHeight;
}
</script>




<!--当前导航加.on-->
<input type="hidden" id="page" value="<{$smarty.get.page}>" />
<script>
$(function(){
    var page=$("#page").val();
    $(".pNav ."+page).addClass("on").parent().siblings().children().removeClass("on");
});
</script>





</body>
</html>