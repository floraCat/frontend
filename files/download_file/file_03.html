<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" href="h_reset.css" />
	<script src="jquery-1.10.2.js"></script>
	
</head>
<body>

<style>
	.fForm dl{ position:relative; overflow:hidden; margin-bottom:15px;}
	.fForm dt{ float:left; width:80px; line-height:35px; text-align:right; white-space:nowrap;}
	.fForm dd{ margin-left:90px;}
	.fFiles .fFile{ position:relative; width:80px; height:80px;}
	.fFiles .fFile img{ width:100%; height:100%;}
	.fFiles .fFile input{ position:absolute; top:0; left:0; width:100%; height:100%; opacity:0; -moz-opacity:0; -khtml-opacity:0; -webkit-opacity:0;}
	.fFiles .fFile .quit_file{ display:none; position:absolute; bottom:0; right:0; width:15px; height:15px; background:url(images/col_form/i_quit.png) no-repeat; background-size:100% 100%;}
	.fFiles .fFile.on .quit_file{ display:block;}
	.fFiles{ overflow:hidden;}
	.fFiles .fFile{ float:left; margin:0 5px 5px 0;}
</style>
<div class="fForm" style="width:500px; margin:10px auto;">
<dl>
    <dt>dl_file3：</dt>
    <dd>
        <div class="fFiles">
            <div class="fFile" data-js-file>
                <input type="file" />
				<img src="images/col_form/pic_default.jpg" data-js-role="images/pic_default.jpg" />
                <a class="quit_file"></a>
            </div>
            <div class="fFile" data-js-file>
                <input type="file" />
				<img src="images/col_form/pic_default.jpg" data-js-role="images/pic_default.jpg" />
                <a class="quit_file"></a>
            </div>
            <div class="fFile" data-js-file>
                <input type="file" />
				<img src="images/col_form/pic_default.jpg" data-js-role="images/pic_default.jpg" />
                <a class="quit_file"></a>
            </div>
        </div>
    </dd>
</dl>
</div>
<script>
$(function(){
	//上传图片预览
	$("[data-js-file]").on("change","input",function(){
		var objUrl = getFileUrl(this);
		if (objUrl){
			$(this).parents(".fFile").find("img").attr("src", objUrl);
			$(this).parents(".fFile").addClass("on");
		}else{
			$(this).parents(".fFile").removeClass("on");
		}
		$(".fForm .quit_file").click(function(){
			var parent=$(this).data("js-role");
			if(parent && parent!=".fFile"){
				var $img=$(this).parents(parent).find("img");
				$(this).parents(parent).find(".fFile").removeClass("on");
				$(this).parents(parent).find("input").val("");
			}else{
				var $img=$(this).parents(".fFile").find("img");
				$(this).parents(".fFile").removeClass("on");
				$(this).parents(".fFile").find("input").val("");
			}
			$img.attr("src",$img.data("js-role"));
		});
		function getFileUrl(obj) { 
			var url; 
			if (navigator.userAgent.indexOf("MSIE")>=1){ // IE 
				url = obj.value; 
			}else if(window.createObjectURL!=undefined){ // basic
				url = window.createObjectURL(obj.files.item(0));
			}else if (window.URL!=undefined){ // mozilla(firefox)
				url = window.URL.createObjectURL(obj.files.item(0)); 
			}else if (window.webkitURL!=undefined){ // webkit or chrome
				url = window.webkitURL.createObjectURL(obj.files.item(0)); 
			} 
			return url; 
		} 
	});});
</script>

</body>
</html>